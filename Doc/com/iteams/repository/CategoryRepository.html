<!DOCTYPE HTML>
<html lang="zh">
<head>
<!-- Generated by javadoc (17) on Mon Mar 17 08:31:45 CST 2025 -->
<title>CategoryRepository</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-03-17">
<meta name="description" content="declaration: package: com.iteams.repository, interface: CategoryRepository">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="跳过导航链接">跳过导航链接</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="导航">
<li><a href="../../../index.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="nav-bar-cell1-rev">类</li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../index-files/index-1.html">索引</a></li>
<li><a href="../../../help-doc.html#class">帮助</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method-summary">方法</a></li>
</ul>
<ul class="sub-nav-list">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li>构造器&nbsp;|&nbsp;</li>
<li><a href="#method-detail">方法</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">程序包</span>&nbsp;<a href="package-summary.html">com.iteams.repository</a></div>
<h1 title="接口 CategoryRepository" class="title">接口 CategoryRepository</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>所有超级接口:</dt>
<dd><code>org.springframework.data.repository.CrudRepository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</code>, <code>org.springframework.data.jpa.repository.JpaRepository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</code>, <code>org.springframework.data.repository.ListCrudRepository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</code>, <code>org.springframework.data.repository.ListPagingAndSortingRepository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</code>, <code>org.springframework.data.repository.PagingAndSortingRepository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</code>, <code>org.springframework.data.repository.query.QueryByExampleExecutor&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code>, <code>org.springframework.data.repository.Repository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Repository
</span><span class="modifiers">public interface </span><span class="element-name type-name-label">CategoryRepository</span><span class="extends-implements">
extends org.springframework.data.jpa.repository.JpaRepository&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&gt;</span></div>
<div class="block">资产分类元数据访问接口
 <p>
 该接口扩展了Spring Data JPA的<code>JpaRepository</code>，提供对<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类"><code>CategoryMetadata</code></a>实体的基本CRUD操作，
 以及针对资产分类管理特定需求的自定义查询方法。
 </p>
 <p>
 分类元数据表存储资产分类的层次结构信息，支持最多三级分类（大类、中类、小类），
 每个分类节点包含名称、代码、层级等信息。系统通过这些分类信息对资产进行组织和管理。
 </p>
 <p>
 核心功能包括：
 <ul>
   <li>按名称和路径查询分类节点</li>
   <li>获取指定父节点的所有子分类</li>
   <li>验证分类路径的有效性</li>
   <li>按层级获取分类列表</li>
 </ul>
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>方法概要</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">所有方法</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">实例方法</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">抽象方法</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">修饰符和类型</div>
<div class="table-header col-second">方法</div>
<div class="table-header col-last">说明</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#existsByCategoryIdAndLevel(java.lang.Long,java.lang.Byte)" class="member-name-link">existsByCategoryIdAndLevel</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;categoryId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="java.lang中的类或接口" class="external-link">Byte</a>&nbsp;level)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">检查指定ID和层级的分类是否存在</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByCategoryIdAndLevel(java.lang.Long,java.lang.Byte)" class="member-name-link">findByCategoryIdAndLevel</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;categoryId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="java.lang中的类或接口" class="external-link">Byte</a>&nbsp;level)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">根据分类ID和层级查询分类</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="java.util中的类或接口" class="external-link">List</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByLevel(java.lang.Integer)" class="member-name-link">findByLevel</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="java.lang中的类或接口" class="external-link">Integer</a>&nbsp;level)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">根据分类层级查询分类列表</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByName(java.lang.String)" class="member-name-link">findByName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;name)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">根据分类名称查询分类信息</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByNameAndLevel(java.lang.String,java.lang.Byte)" class="member-name-link">findByNameAndLevel</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="java.lang中的类或接口" class="external-link">Byte</a>&nbsp;level)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">通过分类名称和级别查找分类</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="java.util中的类或接口" class="external-link">List</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByParentCategoryId(java.lang.Long)" class="member-name-link">findByParentCategoryId</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;parentId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">查询指定父分类下的所有子分类</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="java.util中的类或接口" class="external-link">List</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByParentId(java.lang.Long)" class="member-name-link">findByParentId</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;parentId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">查询指定父节点的所有直接子分类</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#findByPath(java.lang.String)" class="member-name-link">findByPath</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">根据分类路径查询分类信息</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="java.lang中的类或接口" class="external-link">Integer</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#validatePath(java.lang.String)" class="member-name-link">validatePath</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">验证分类路径是否有效</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.data.repository.CrudRepository">从接口继承的方法&nbsp;org.springframework.data.repository.CrudRepository</h3>
<code>count, delete, deleteAll, deleteAll, deleteAllById, deleteById, existsById, findById, save</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.data.jpa.repository.JpaRepository">从接口继承的方法&nbsp;org.springframework.data.jpa.repository.JpaRepository</h3>
<code>deleteAllByIdInBatch, deleteAllInBatch, deleteAllInBatch, deleteInBatch, findAll, findAll, flush, getById, getOne, getReferenceById, saveAllAndFlush, saveAndFlush</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.data.repository.ListCrudRepository">从接口继承的方法&nbsp;org.springframework.data.repository.ListCrudRepository</h3>
<code>findAll, findAllById, saveAll</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.data.repository.ListPagingAndSortingRepository">从接口继承的方法&nbsp;org.springframework.data.repository.ListPagingAndSortingRepository</h3>
<code>findAll</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.data.repository.PagingAndSortingRepository">从接口继承的方法&nbsp;org.springframework.data.repository.PagingAndSortingRepository</h3>
<code>findAll</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.springframework.data.repository.query.QueryByExampleExecutor">从接口继承的方法&nbsp;org.springframework.data.repository.query.QueryByExampleExecutor</h3>
<code>count, exists, findAll, findBy, findOne</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>方法详细资料</h2>
<ul class="member-list">
<li>
<section class="detail" id="findByName(java.lang.String)">
<h3>findByName</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;name)</span></div>
<div class="block">根据分类名称查询分类信息
 <p>
 分类名称在同一父节点下必须唯一，系统允许不同父节点下存在同名分类。
 该方法用于验证新增分类时名称的唯一性，以及通过名称快速定位分类信息。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>name</code> - 分类名称，不可为null</dd>
<dt>返回:</dt>
<dd>包含分类信息的Optional对象，如果未找到则为empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findByPath(java.lang.String)">
<h3>findByPath</h3>
<div class="member-signature"><span class="annotations">@Query(value="WITH RECURSIVE category_path AS (SELECT c.category_id, c.name, c.level, CAST(c.name AS CHAR(255)) AS path FROM category_metadata c WHERE c.parent_id IS NULL UNION ALL SELECT c.category_id, c.name, c.level, CONCAT(cp.path, \'/\', c.name) FROM category_metadata c JOIN category_path cp ON c.parent_id = cp.category_id) SELECT c.* FROM category_metadata c JOIN category_path cp ON c.category_id = cp.category_id WHERE cp.path = ?1 LIMIT 1",
       nativeQuery=true)
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByPath</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;path)</span></div>
<div class="block">根据分类路径查询分类信息
 <p>
 分类路径是从根节点到当前节点的完整路径，格式为"根分类/二级分类/三级分类"。
 路径在整个分类体系中必须唯一，用于Excel导入时验证分类的有效性。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>path</code> - 分类路径，格式为"根分类/二级分类/三级分类"，不可为null</dd>
<dt>返回:</dt>
<dd>包含分类信息的Optional对象，如果未找到则为empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findByParentId(java.lang.Long)">
<h3>findByParentId</h3>
<div class="member-signature"><span class="annotations">@Query("SELECT c FROM CategoryMetadata c WHERE c.parent.categoryId = ?1")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="java.util中的类或接口" class="external-link">List</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByParentId</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;parentId)</span></div>
<div class="block">查询指定父节点的所有直接子分类
 <p>
 获取特定父分类下的所有直接子分类，用于构建分类树形结构和级联选择器。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>parentId</code> - 父分类ID，如果为null则查询顶级分类（无父节点的分类）</dd>
<dt>返回:</dt>
<dd>子分类列表，如果没有子分类则返回空列表</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findByLevel(java.lang.Integer)">
<h3>findByLevel</h3>
<div class="member-signature"><span class="annotations">@Query("SELECT c FROM CategoryMetadata c WHERE c.level = ?1")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="java.util中的类或接口" class="external-link">List</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByLevel</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="java.lang中的类或接口" class="external-link">Integer</a>&nbsp;level)</span></div>
<div class="block">根据分类层级查询分类列表
 <p>
 获取指定层级的所有分类节点，层级从1开始（1=一级分类，2=二级分类，3=三级分类）。
 用于统计报表和按层级筛选分类。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>level</code> - 分类层级，有效值为1、2、3</dd>
<dt>返回:</dt>
<dd>该层级的所有分类列表</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="validatePath(java.lang.String)">
<h3>validatePath</h3>
<div class="member-signature"><span class="annotations">@Query(value="WITH RECURSIVE category_path AS (SELECT c.category_id, c.name, c.level, CAST(c.name AS CHAR(255)) AS path FROM category_metadata c WHERE c.parent_id IS NULL UNION ALL SELECT c.category_id, c.name, c.level, CONCAT(cp.path, \'/\', c.name) FROM category_metadata c JOIN category_path cp ON c.parent_id = cp.category_id) SELECT COUNT(*) FROM category_path WHERE path = ?1",
       nativeQuery=true)
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" title="java.lang中的类或接口" class="external-link">Integer</a></span>&nbsp;<span class="element-name">validatePath</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;path)</span></div>
<div class="block">验证分类路径是否有效
 <p>
 该方法根据分类的完整路径检查是否存在匹配的分类。
 使用动态生成的fullPath进行比较，而不是直接存储的属性。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>path</code> - 待验证的分类路径</dd>
<dt>返回:</dt>
<dd>路径存在返回1，否则返回0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findByParentCategoryId(java.lang.Long)">
<h3>findByParentCategoryId</h3>
<div class="member-signature"><span class="annotations">@Query("SELECT c FROM CategoryMetadata c WHERE c.parent.categoryId = ?1")
</span><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="java.util中的类或接口" class="external-link">List</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByParentCategoryId</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;parentId)</span></div>
<div class="block">查询指定父分类下的所有子分类
 <p>
 根据父分类ID查询其直接子分类，用于构建分类级联选择和分类树。
 例如，查询一级分类下的所有二级分类，或二级分类下的所有三级分类。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>parentId</code> - 父分类ID</dd>
<dt>返回:</dt>
<dd>该父分类下的所有子分类列表</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findByCategoryIdAndLevel(java.lang.Long,java.lang.Byte)">
<h3>findByCategoryIdAndLevel</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByCategoryIdAndLevel</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;categoryId,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="java.lang中的类或接口" class="external-link">Byte</a>&nbsp;level)</span></div>
<div class="block">根据分类ID和层级查询分类
 <p>
 同时指定分类ID和层级进行精确查询，确保查询到的分类
 不仅ID匹配，而且层级也正确，增强查询的准确性和安全性。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>categoryId</code> - 分类ID</dd>
<dd><code>level</code> - 分类层级，1-一级，2-二级，3-三级</dd>
<dt>返回:</dt>
<dd>包含分类信息的Optional对象，如果不存在则为empty</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="existsByCategoryIdAndLevel(java.lang.Long,java.lang.Byte)">
<h3>existsByCategoryIdAndLevel</h3>
<div class="member-signature"><span class="annotations">@Query("SELECT COUNT(c) &gt; 0 FROM CategoryMetadata c WHERE c.categoryId = :categoryId AND c.level = :level")
</span><span class="return-type">boolean</span>&nbsp;<span class="element-name">existsByCategoryIdAndLevel</span><wbr><span class="parameters">(@Param("categoryId")
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" title="java.lang中的类或接口" class="external-link">Long</a>&nbsp;categoryId,
 @Param("level")
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="java.lang中的类或接口" class="external-link">Byte</a>&nbsp;level)</span></div>
<div class="block">检查指定ID和层级的分类是否存在
 <p>
 使用计数查询优化的方法验证给定的分类ID和层级组合是否存在，
 相比于findByCategoryIdAndLevel方法更高效，因为只返回布尔值而非实体对象。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>categoryId</code> - 要验证的分类ID</dd>
<dd><code>level</code> - 要验证的分类层级</dd>
<dt>返回:</dt>
<dd>如果存在返回true，否则返回false</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findByNameAndLevel(java.lang.String,java.lang.Byte)">
<h3>findByNameAndLevel</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html" title="java.util中的类或接口" class="external-link">Optional</a>&lt;<a href="../model/entity/CategoryMetadata.html" title="com.iteams.model.entity中的类">CategoryMetadata</a>&gt;</span>&nbsp;<span class="element-name">findByNameAndLevel</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="java.lang中的类或接口" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" title="java.lang中的类或接口" class="external-link">Byte</a>&nbsp;level)</span></div>
<div class="block">通过分类名称和级别查找分类
 <p>
 根据分类名称和层级查询分类信息，主要用于Excel导入时通过分类名称找到对应的分类ID。
 由于分类名称在同一层级内应唯一，因此使用Optional返回值。
 </p></div>
<dl class="notes">
<dt>参数:</dt>
<dd><code>name</code> - 分类名称，如"服务器设备"</dd>
<dd><code>level</code> - 分类级别，1-一级，2-二级，3-三级</dd>
<dt>返回:</dt>
<dd>包含分类信息的Optional对象，如果不存在则为empty</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
